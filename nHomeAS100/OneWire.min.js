var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},fs=require("fs");(function(n){var r=function(){function n(){this._rootPath="",this._owdeviceidregex="[A-F0-9]{2}.[A-F0-9]{12}",this._devices=[]}return n.getInstance=function(){return this._instance==null&&(this._instance=new n),this._instance},n.prototype.getDevices=function(n){return this._rootPath=n,this.fetchDevices(),this._devices},n.prototype.fetchDevices=function(){var n=fs.readdirSync(this._rootPath),f=new RegExp(this._owdeviceidregex),i,r,u;for(i in n)f.test(n[i])&&(r=this._rootPath+"/"+n[i],u=new t(r),this._devices.push(u),console.log("OneWire:","this ["+r+"] is onewire device"))},n}(),t,i;n.DeviceManager=r,t=function(){function n(n){this.path=n,this._devicepath=n,this.initDevice()}return n.prototype.initDevice=function(){this._id=fs.readFileSync(this._devicepath+"/id","ascii"),this._family=fs.readFileSync(this._devicepath+"/family","ascii"),this._crc=fs.readFileSync(this._devicepath+"/crc8","ascii"),this._address=fs.readFileSync(this._devicepath+"/address","ascii"),this._type=fs.readFileSync(this._devicepath+"/type","ascii"),this._alias=fs.readFileSync(this._devicepath+"/alias","ascii"),console.log("OneWire:","id:"+this._id)},n.prototype.getId=function(){return this._id},n.prototype.getFamily=function(){return this._family},n.prototype.getCRC=function(){return this._crc},n.prototype.getAddress=function(){return this._address},n.prototype.getType=function(){return this._type},n.prototype.getAlias=function(){return this._alias},n.prototype.setAlias=function(n){return fs.writeFile(this._devicepath+"/alias",n,function(t){if(t){console.log("OneWire:","Error"+t);throw t;}this._alias=n,console.log("OneWire:","Device alias:"+this._alias),this._devicePath=this._devicePath.replace(this._id,this._alias),console.log("OneWire:","Device Path :"+this._devicepath)}),!0},n.prototype.getRenderControl=function(){return"<div>Control will be rendered here<\/div>"},n}(),n.OneWireDevice=t,i=function(n){function t(t){n.call(this,t),this.path=t,this._pios=Array()}return __extends(t,n),t.prototype.getChannels=function(){return 2},t.prototype.getChannelState=function(){return!0},t.prototype.setPIOState=function(){},t}(t),n.AddressableSwitch=i})(exports.OneWire||(exports.OneWire={}));var OneWire=exports.OneWire,deviceManager=OneWire.DeviceManager.getInstance(),result=deviceManager.getDevices("/mnt/owfs",{});result&&result[0].setAlias("owdevice02"),console.log(result)